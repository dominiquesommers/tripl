@if (!uiService.isSidebarOpen() && !uiService.isMobile()) {
  <button class="toggle-btn floating-open-btn" (click)="uiService.toggleSidebar()">
    <div class="icon-box"><div class="sidebar-icon-bar"></div></div>
  </button>
}

<div class="panel-container"
     [class.desktop-sidebar]="!uiService.isMobile()"
     [class.mobile-sheet]="uiService.isMobile()"
     [class.closed]="!uiService.isSidebarOpen() && !uiService.isMobile()">

  @if (!uiService.isMobile()) {
    <h2 class="panel-title">{{ getHeaderTitle() }}</h2>
    <div class="header-actions">
      <button class="toggle-btn" (click)="uiService.toggleSidebar()">
        <div class="icon-box"><div class="sidebar-icon-bar"></div></div>
      </button>
    </div>
  } @else {
    <div class="drag-handle" cdkDragHandle (click)="toggleMobileSheet()"></div>
  }

  <div class="content">
    @if (uiService.selectedVisit(); as visit) {
      <app-place-panel [visit]="visit" />
    } @else {
      @if (uiService.selectedRoute(); as route) {
        <app-route-panel [route]="route" />
      } @else {
        <app-overview-panel />
      }
    }
  </div>
</div>
